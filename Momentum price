{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/tanish34/momentum-price?scriptVersionId=245472079\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"code","execution_count":1,"id":"a223a4a5","metadata":{"execution":{"iopub.execute_input":"2025-06-14T18:19:00.311462Z","iopub.status.busy":"2025-06-14T18:19:00.31057Z","iopub.status.idle":"2025-06-14T18:19:05.568343Z","shell.execute_reply":"2025-06-14T18:19:05.567325Z"},"papermill":{"duration":5.26287,"end_time":"2025-06-14T18:19:05.570041","exception":false,"start_time":"2025-06-14T18:19:00.307171","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Collecting backtrader\r\n","  Downloading backtrader-1.9.78.123-py2.py3-none-any.whl.metadata (6.8 kB)\r\n","Downloading backtrader-1.9.78.123-py2.py3-none-any.whl (419 kB)\r\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m419.5/419.5 kB\u001b[0m \u001b[31m9.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\r\n","\u001b[?25hInstalling collected packages: backtrader\r\n","Successfully installed backtrader-1.9.78.123\r\n"]}],"source":["!pip install backtrader"]},{"cell_type":"code","execution_count":2,"id":"f67dd0ff","metadata":{"_cell_guid":"b1076dfc-b9ad-4769-8c92-a6c4dae69d19","_uuid":"8f2839f25d086af736a60e9eeb907d3b93b6e0e5","execution":{"iopub.execute_input":"2025-06-14T18:19:05.576715Z","iopub.status.busy":"2025-06-14T18:19:05.575891Z","iopub.status.idle":"2025-06-14T18:19:08.936404Z","shell.execute_reply":"2025-06-14T18:19:08.934989Z"},"papermill":{"duration":3.365677,"end_time":"2025-06-14T18:19:08.938264","exception":false,"start_time":"2025-06-14T18:19:05.572587","status":"completed"},"tags":[]},"outputs":[],"source":["import backtrader as bt\n","import numpy as np\n","import pandas as pd\n","from scipy.stats import linregress, skew"]},{"cell_type":"code","execution_count":3,"id":"616144d6","metadata":{"execution":{"iopub.execute_input":"2025-06-14T18:19:08.94346Z","iopub.status.busy":"2025-06-14T18:19:08.942698Z","iopub.status.idle":"2025-06-14T18:19:08.950125Z","shell.execute_reply":"2025-06-14T18:19:08.949297Z"},"papermill":{"duration":0.011353,"end_time":"2025-06-14T18:19:08.951498","exception":false,"start_time":"2025-06-14T18:19:08.940145","status":"completed"},"tags":[]},"outputs":[],"source":["class NewMom(bt.Strategy):\n","    params = (\n","        ('lookback', 252),       # 12-month formation\n","        ('hold_period', 21),     # 1-month holding\n","        ('top_decile', 0.1),     # 10% winners\n","        ('bottom_decile', 0.1),  # 10% losers\n","        ('beta_threshold', 2),   # Short-side beta restriction\n","        ('skew_window', 252),    # 12-month skewness window\n","        ('target_vol', 0.12)     # Annualized volatility target\n","    )\n","\n","    def __init__(self):\n","        self.market = self.datas[0]\n","        self.stocks = self.datas[1:]\n","        self.momentum = {}\n","        #Momentum calculation for fundamental strategy\n","        for stock in self.stocks:\n","            self.momentum[stock] = bt.indicators.Momentum(stock, period=self.p.lookback)\n","        self.volatility = (\n","            bt.indicators.StandardDeviation(self.market.close, period=126, sqrt=True) * np.sqrt(252)\n","        )\n","        "]}],"metadata":{"kaggle":{"accelerator":"none","dataSources":[],"dockerImageVersionId":31040,"isGpuEnabled":false,"isInternetEnabled":true,"language":"python","sourceType":"notebook"},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.11.11"},"papermill":{"default_parameters":{},"duration":14.162174,"end_time":"2025-06-14T18:19:09.672922","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2025-06-14T18:18:55.510748","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}